create blog post annoucing https://www.npmjs.com/package/edge-lambda-url-authorizer

https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/DownloadDistS3AndCustomOrigins.html#concept_lambda_function_url

https://aws.amazon.com/blogs/aws/announcing-aws-lambda-function-urls-built-in-https-endpoints-for-single-function-microservices/
>Function URL Pricing
>Function URLs are included in Lambda’s request and duration pricing. For example, let’s imagine that you deploy a single Lambda function with 128 MB of memory and an average invocation time of 50 ms. The function receives five million requests every month, so the cost will be $1.00 for the requests, and $0.53 for the duration. The grand total is $1.53 per month, in the US East (N. Virginia) Region.

>When to use Function URLs vs. Amazon API Gateway
>Function URLs are best for use cases where you must implement a single-function microservice with a public endpoint that doesn’t require the advanced functionality of API Gateway, such as request validation, throttling, custom authorizers, custom domain names, usage plans, or caching. For example, when you are implementing webhook handlers, form validators, mobile payment processing, advertisement placement, machine learning inference, and so on. It is also the simplest way to invoke your Lambda functions during research and development without leaving the Lambda console or integrating additional services.

>Amazon API Gateway is a fully managed service that makes it easy for you to create, publish, maintain, monitor, and secure APIs at any scale. Use API Gateway to take advantage of capabilities like JWT/custom authorizers, request/response validation and transformation, usage plans, built-in AWS WAF support, and so on.

=> save some pennies from pointless api gateway calls

purpose
secure lambda function url endpoint with iam auth + only call from your cloudfront dist using lambda@edge to sigv4 the incomming request

this lets one apply all the security features of cloudfront to their lambda fn




what do we get
no 'open' lambda endpoint (this can be marked as a security risk by org security scanners...)

'edge endpoints'

custom domain + cert

WAF

caching

fallback origin (incase lambda in main region region goes down)

https://aws.amazon.com/cloudfront/features/


issue
origins per distribution defaults to 25 (can be increased to ???)
https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/cloudfront-limits.html#limits-web-distributions
